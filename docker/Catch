FROM ghcr.io/bython-talk/alpine-llvm:latest
RUN apk add build-base gcc wget unzip cmake make
RUN wget --no-check-certificate https://github.com/catchorg/Catch2/archive/refs/tags/v3.3.2.zip -O /catch2.zip && unzip /catch2.zip -d /catch2

WORKDIR /catch2/Catch2-3.3.2
RUN cmake -E make_directory build

WORKDIR /catch2/Catch2-3.3.2/build
RUN cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_LIBDIR=/usr/lib/ /catch2/Catch2-3.3.2
RUN cmake --build . -j4
RUN cmake --install .

ENTRYPOINT [ "/bin/bash" ]
